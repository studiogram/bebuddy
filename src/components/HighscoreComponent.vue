<script>
import gsap from "gsap";
import { mapState } from "vuex";

export default {
  name: "HighscoreComponent",
  data() {
    return {
      valid: true,
      allowBlink: false,
      timeout: 10,
    };
  },
  computed: {
    ...mapState(["highscores", "dossard", "distance"]),
  },
  mounted() {
    this.setTimelines();
  },
  methods: {
    setTimelines() {
      /* enter / leave anim */
      this.highscoreTl = gsap
        .timeline({
          paused: true,
          repeat: 0,
          onComplete: () => {
            this.allowBlink = true;
            gsap.set(this.$refs.message, { autoAlpha: 1 });
          },
        })
        .to(this.$refs.highscore, {
          duration: 1.5,
          yPercent: -100,
        });
      /* button anim */
      gsap.timeline({ repeat: -1, yoyo: true }).fromTo(
        ".highscore__button__anim",
        {
          scale: 1,
          transformOrigin: "center center",
        },
        {
          duration: 0.5,
          stagger: 0.1,
          scale: 0.75,
        }
      );
    },
    entering() {
      this.valid = true;
      this.highscoreTl.reverse();
      setTimeout(() => {
        this.allowBlink = false;
        gsap.to(this.$refs.message, { autoAlpha: 0, duration: 1 });
      }, this.timeout * 1000);
    },
    leaving() {
      if (this.valid == true) {
        this.valid = false;
        this.$emit("leave");
        this.highscoreTl.play();
      }
    },
  },
};
</script>

<style lang="scss" scoped>
@keyframes blink {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}
.highscore {
  position: relative;
  height: 100vh;
  .highscore__logo {
    img {
      margin: auto;
      &:first-of-type {
        width: 200px;
      }
      &:last-of-type {
        width: 300px;
      }
    }
  }
  .highscore__button {
    button {
      margin: auto;
      width: 450px;
    }
  }
  .highscore__ended {
    font-size: 5em;
    line-height: 1.25em;
  }
  .highscore__scores {
    & > div {
      visibility: hidden;
      opacity: 0;
    }
    .highscore__scores__single {
      font-size: 2em;
      &:last-of-type {
        border-bottom: 0px !important;
      }
    }
    .highscore__scores__paragraph {
      font-size: 3em;
      line-height: 1.25em;
    }
  }
  footer {
    position: absolute;
    top: 100%;
    .highscore__logo {
      img {
        width: 200px !important;
      }
    }
  }
  .blink {
    animation: 0.5s linear infinite blink alternate;
  }
}
</style>

<template>
  <div
    ref="highscore"
    class="highscore flex flex-wrap justify-center content-between panel bg-yellow"
  >
    <figure class="highscore__logo text-center grow w-full">
      <img src="@/assets/img/logo.svg" alt="BeBuddy logo" />
      <img src="@/assets/img/logo_text.svg" alt="BeBuddy logo texte" />
    </figure>
    <div
      v-if="distance < 99.9"
      ref="highscorebutton"
      class="highscore__button grow w-full text-center"
    >
      <button ref="button" @click="leaving()">
        <svg
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          x="0"
          y="0"
          viewBox="0 0 255.4 255.4"
          xml:space="preserve"
        >
          <circle
            class="fill-brown highscore__button__anim"
            cx="127.7"
            cy="127.7"
            r="127.7"
          />
          <circle
            class="fill-orange highscore__button__anim"
            cx="127.7"
            cy="127.7"
            r="106.7"
          />
          <path
            class="fill-light highscore__button__anim"
            d="M54.6 120.4c-.2-.2-.3-.4-.3-.7 0-.2 0-.3.1-.5 0-.1.1-.3.1-.5v-.8c0-.4 0-.8.1-1.1.1-.4.1-.7.2-1.1l.3-.9c.1 0 .1-.1.1-.1s0-.1.1-.2v-.2s0-.1.1-.2c.5-.9 1.1-1.8 1.7-2.6.6-.8 1.4-1.5 2.4-2 .2-.1.3-.2.5-.3.1-.1.3-.2.5-.2s.4-.1.6-.2c.2-.1.4-.1.6-.1.1-.1.3-.2.5-.2s.3 0 .5-.1h-.2c.1 0 .2-.1.3-.1h.3c.3-.1.5-.1.6-.2h1.2c.3 0 .5 0 .6-.1.1 0 .3-.1.5-.1h1.9c.2 0 .4 0 .6.1.1 0 .2.1.4.1s.4 0 .6-.1c.2 0 .4-.1.6-.1h.2c.4.1.9.1 1.3.2s.9.1 1.4.1h.6c.1.4.2.6.5.7 1.1.5 2.2.8 3.4.8h.2c.6.2 1.1.5 1.5.8.4.4.9.7 1.4 1 .1.2.2.3.4.5.2.1.3.3.3.6.1.1.2.1.3.1.1 0 .2 0 .2.2.2.2.3.4.4.6.1.2.2.4.4.6 0 .1.1.2.3.4.1.2.2.3.2.4.1.2.1.4.2.7 0 .2.1.5.2.7 0 .9-.1 1.7-.2 2.5 0 .3-.1.7-.1 1 0 .3-.1.7-.3.9-.1.2-.2.5-.3.8-.1.3-.2.5-.5.7 0 .1.1.1.1.2 0 .2-.1.3-.3.3-.2 0-.3.1-.4.2-.2.3-.4.5-.8.7-.3.1-.7.2-1.1.2h-.5c-.2 0-.3 0-.5-.1-.3-.2-.6-.3-.9-.4-.3-.1-.6-.2-.9-.4-.1-.2-.3-.3-.5-.3-.2-.1-.3-.2-.5-.3l-.3-.3c-.1-.1-.3-.1-.4-.1-.1 0-.2 0-.2.1l-.8-.5c-.1-.2-.2-.4-.3-.5v.4c-.2-.1-.3-.3-.3-.5s-.1-.4-.2-.6c-.1 0-.1 0-.2.1s-.2.1-.3.1c-.2 0-.4-.2-.7-.5-.2-.3-.5-.5-.6-.5-.3 0-.5-.1-.6-.4-.1-.3-.2-.6-.2-.8.1 0 .2 0 .3-.1 0-.2.1-.5.4-.7 0-.3.1-.6.2-.9.1-.3.2-.6.2-.9.2-.2.4-.4.4-.8 0-.2-.1-.3-.2-.4 0-.1-.1-.2-.1-.3v-.2c0-.1 0-.2-.1-.3-.1-.1-.1-.2-.2-.2-.1-.1-.1-.2-.2-.3h-.2c-.2 0-.4 0-.6.1-.2 0-.4.1-.6.1-.5.2-1.1.3-1.6.5-.6.1-1 .4-1.4.8-.1 0-.2-.1-.3-.1-.1 0-.2.1-.2.2s0 .2-.1.3c-.2.2-.4.5-.5.7-.1.3-.3.5-.5.7 0 .2 0 .4-.1.6-.1.2-.1.4-.1.6 0 .1 0 .2.1.3 0 .2-.1.4-.1.6-.1.2-.1.4-.1.6s.1.3.2.5c-.1.3-.1.5-.1.7 0 .6.2 1.1.5 1.6.1.2.1.4.1.6 0 .2 0 .4.1.6.3 0 .4.2.5.5 0 .3.1.5.3.7l.8.9c.5.3 1 .5 1.5.6s1.1.3 1.6.5c.2.1.5.1.7.1.2 0 .5 0 .7.1.2.2.4.3.6.3.2 0 .5.1.7.1.2 0 .5.1.7.1s.4.2.6.3c.1.1.2.1.4.1.1 0 .4 0 .6-.1l.1.2c0 .2.1.5.3.7.2.2.4.3.7.3.1 0 .2 0 .3-.1.2.1.4.2.5.3.2.1.3.2.5.4s.5.4.7.6c.3.1.5.4.7.6.2.1.4.3.5.5.2.2.3.3.4.6.2.2.4.5.5.7.1.3.2.6.4.9l.3.9c.1.3.2.6.3 1 .1.3.2.6.3 1 .1.3.2.6.2 1 0 .5.1.9.4 1.4 0 .2-.1.3-.1.5s-.1.3-.1.5 0 .3.1.4l-.2.5c.1.1.2.3.2.6 0 .2 0 .4-.1.5 0 .2-.1.4-.1.5V142.5c0 .1-.1.2-.2.2v.5c0 .2 0 .4-.1.5-.2.2-.4.5-.6.8-.2.3-.4.5-.5.8-.1.1-.2.1-.3.2-.1.1-.2.1-.3.2-.1 0-.2.1-.2.1-.1 0-.2 0-.2.1-.1 0-.2.1-.3.2l-.2.2c-.2.1-.4.2-.6.4-.1.1-.3.1-.5.2s-.3.2-.6.3c-.3 0-.5 0-.8.1-.2.1-.5.2-.7.2-.4 0-.7 0-1.1.1-.4.1-.7.1-1.1.1h-.3c-.2 0-.4-.1-.6-.1h-.6c-.3 0-.6 0-.7-.1h-.2c-.5-.1-1-.3-1.6-.4-.6-.1-1.1-.2-1.5-.2-.1 0-.1 0-.2-.1 0 0-.1-.1-.2-.1-.6 0-1.2-.1-1.8-.3-.6-.1-1.2-.3-1.8-.5-.2 0-.4-.1-.7-.1 0-.1-.1-.1-.2-.2l-.2-.2c-.1 0-.1-.1-.2-.1h-.2l-.6-.3c-.2-.1-.4-.2-.7-.2-.3-.1-.6-.3-.8-.4-.3-.1-.5-.3-.7-.5-.5-.2-1-.5-1.4-.9-.4-.4-.9-.7-1.4-1l-.7-.9c-.2-.2-.3-.5-.5-.7-.1-.3-.3-.5-.5-.7 0-.2-.1-.5-.3-.7l-.3-1.1c-.1-.4-.1-.8-.2-1.2-.1-.4-.1-.8-.1-1.2v-.5c0-.1 0-.3.1-.5l.3-.3c0-.1-.1-.2-.3-.2-.2 0-.3-.1-.3-.2s0-.1.1-.2.2-.3.3-.4.2-.2.4-.3c0-.2-.1-.4-.2-.6 0-.1.1-.2.2-.2s.2 0 .3-.1c0-.1 0-.1-.2-.2l-.2-.1c0-.1.1-.2.3-.2.2 0 .3 0 .4.1.2.1.4.2.7.2.2 0 .3 0 .5-.1.1 0 .3-.1.5-.1 0 0 .1.1.2.1s.2 0 .3-.1.2-.2.2-.3h.2c.1 0 .2 0 .3-.1.1-.1.2-.1.2-.1.1.1.3.1.4.2.1 0 .3.1.5.1 0 0 .1-.1.1-.2s.1-.1.1-.1l.2.2h.4c.2 0 .4.1.4.4.2.1.4.2.6.1.2 0 .4.1.5.2.1 0 .2-.1.3-.1h.3c.2.2.4.4.7.4.3.1.5.2.7.4.1.1.3.2.3.4.1.2.2.3.4.4.1.5.3.9.6 1.4 0 .2.1.5.2.7.1.2.2.4.2.6 0 .1 0 .2-.1.3-.1.1-.1.3-.1.6s0 .5.1.7c.1.2.1.5.1.7 0 .2 0 .3-.1.4.1.2.2.3.3.5.1.1.1.3.1.6 0 .1.1.2.2.2s.2.1.2.3c.2.1.4.2.5.4.1.2.4.3.6.3l.3.3c.1.1.2.1.3.2.2 0 .3.1.5.2.1.1.3.2.5.2h.2c.1 0 .2 0 .3.1.1 0 .2.1.3.1.1 0 .2 0 .2-.1.1-.2.3-.3.5-.5.2-.1.4-.3.6-.5.2-.3.3-.6.4-.9.1-.3.2-.6.3-1 .1-.2.2-.5.2-.8v-.3c-.1-.6-.2-1.1-.3-1.7-.1-.6-.3-1.1-.5-1.6-.2-.2-.3-.5-.4-.8-.1-.3-.2-.5-.5-.6-.1-.4-.3-.7-.6-1-.3-.2-.6-.5-.9-.8-.3-.4-.6-.7-1-.9-.4-.2-.8-.5-1.2-.7-.2 0-.3-.1-.5-.2-.1-.1-.3-.2-.5-.2-.3-.1-.5-.2-.7-.3-.2-.1-.4-.2-.6-.2-.2-.1-.4-.1-.6-.1l-.1.1s-.1.1-.2.1-.1 0-.1-.1c-.2-.2-.4-.3-.6-.3-.2 0-.5 0-.7-.1-.2-.2-.4-.3-.6-.4-.2-.1-.5-.1-.7-.2-.1-.1-.2-.1-.3-.1-.1 0-.1 0-.2.1-.4-.2-.7-.3-1.1-.4-.4-.1-.7-.2-1.1-.5h-.6c0-.1 0-.2-.1-.3.1 0 .2 0 .2-.1l-.1-.1-.2-.2c-.1-.1-.2-.2-.3-.2 0-.1-.1-.2-.2-.2-.1-.3-.3-.5-.6-.7-.2-.2-.4-.4-.6-.7-.2-.2-.3-.5-.3-.8-.1-.3-.2-.5-.3-.8-.1-.1-.1-.3-.1-.5s-.1-.3-.3-.4l-.4-1.9zM117.1 114.5v1.2c0 .5-.1 1-.2 1.4-.7.2-1.5.3-2.3.3-.3 0-.6 0-.9-.1-.3 0-.6-.1-.9-.2-.4-.1-.8-.2-1.2-.1-.4 0-.8 0-1.2-.2-.2 0-.5-.1-.7-.2-.2-.1-.4-.2-.7-.2-.2 0-.4.1-.6.1h-.8c-.2 0-.4 0-.6.1-.1.1-.2.2-.2.3 0 .1 0 .2.1.3.1.1.1.2.1.3 0 .1.1.3.1.5 0 .3 0 .6-.1.8-.1.3-.1.5-.1.8v.3c0 .2 0 .3-.1.4-.1.1-.1.2-.1.3 0 0 0 .1.1.3 0 .5.1 1 .1 1.4v1.4c0 .8-.1 1.6-.2 2.4 0 .3 0 .6-.1.9-.1.3-.1.6-.1.9 0 .2 0 .4.1.5 0 0 0 .1-.1.1h-.1v1.1c0 .4-.1.7-.1 1-.1.2-.1.4-.1.6V133c0 .2-.1.4-.1.6-.2.7-.4 1.4-.4 2.2 0 .7-.1 1.5-.3 2.2-.1.1-.2.2-.2.5v.6c0 .1 0 .2-.1.4s-.2.4-.2.6v1.2c0 .2-.1.4-.1.6-.1.7-.2 1.5-.4 2.2-.1.7-.2 1.5-.3 2.3.1 0 .2.1.2.3 0 .1-.1.2-.2.2-.2 0-.3-.1-.4-.2-.4.4-1 .6-1.7.6-.2 0-.5 0-.7-.1-.2 0-.5-.1-.7-.2-.6-.4-1.3-.5-2-.5h-.4c-.1 0-.2 0-.4.1-.1-.3-.2-.6-.3-.8-.3-.1-.5-.2-.7-.3-.2-.1-.4-.3-.7-.4-.1-.1-.2-.2-.4-.2s-.3-.1-.4-.2c-.1-.2-.2-.3-.4-.4-.2-.1-.3-.2-.4-.4 0-.1-.1-.2-.1-.4s0-.5.1-.7c.1-.2.1-.4.2-.7l.7-4.8c0-.6.1-1.2.3-1.7.1-.6.2-1.1.2-1.7.1-.5.2-1.1.3-1.6.1-.6.1-1.1.2-1.6.1-.3.1-.6.2-.8 0-.2.1-.5.1-.8s0-.5-.1-.6c-.1 0-.2-.1-.2-.2h.2c.1 0 .2-.1.2-.3 0-.1-.1-.3-.1-.5 0-.3.1-.6.2-.9.1-.3.2-.6.2-.9 0-1 .1-2 .3-2.9.2-1 .3-1.9.3-2.9 0-.6.1-1.1.2-1.7.1-.5.2-1.1.2-1.6-.3-.2-.6-.3-.9-.3-.3 0-.7 0-1-.1H96c-.2 0-.3 0-.5-.1-.1-.1-.3-.1-.5-.1s-.3 0-.4.1h-.5c-.5 0-1 0-1.4.1-.4.1-.9.1-1.4.1-.1 0-.2.1-.3.1-.3 0-.5-.1-.8-.2-.2-.1-.5-.2-.8-.3-.2 0-.4-.2-.6-.3-.1-.2-.3-.4-.5-.6-.3-.1-.5-.2-.5-.3v-.2c0-.3-.1-.5-.4-.7-.2-.2-.4-.5-.5-.7l-.6-.6c-.2-.2-.3-.5-.4-.8-.1-.2-.2-.3-.3-.5-.2-.1-.2-.3-.2-.5.2-.1.4-.2.5-.2.2-.1.4-.1.5-.2 0-.2 0-.3-.1-.3s-.2-.1-.2-.2c.1 0 .2-.1.3-.1h.8c.1-.1.2-.2.2-.3.1-.1.2-.2.3-.2 0 0 .1 0 .3.1.1 0 .1.1.2.1.2 0 .3-.1.5-.2.1-.1.3-.2.5-.2h.2c.7-.2 1.4-.3 2-.2.7 0 1.4 0 2.1-.1h.9c.8 0 1.6 0 2.5-.1.8-.1 1.6-.2 2.5-.2.2 0 .4 0 .6.1.2 0 .4.1.6.2.1 0 .2-.1.4-.1s.4 0 .6.1c.2 0 .4.1.6.1.4 0 .8-.1 1.1-.1.3 0 .7-.1 1-.1.7 0 1.2.1 1.7.3.5.1.9.2 1.4.2.5 0 .9 0 1.4.1.1 0 .2.1.3.1h.3c.4 0 .8 0 1.1-.1.3-.1.7-.1 1.1-.1.1.2.2.5.3.7.1.2.4.4.6.4.1 0 .2 0 .3-.1 0 .4.2.5.5.5l.6.9c.2.3.4.6.7.9.5.3.9.7 1.2 1.3.5 0 .8.4 1.3.8zM143.6 145.4c-.1 0-.2-.1-.3-.1-.2 0-.3.1-.3.2s-.1.3-.1.5c0 .3 0 .5-.1.6 0 .2-.1.3-.2.4-.2.1-.3.2-.3.3 0 .1-.1.1-.2.1h-.4c-.1 0-.2 0-.2.1-.1 0-.3-.1-.5-.1h-.5c-.2 0-.4 0-.6-.1s-.4-.2-.5-.3c-.7-.1-1.2-.4-1.7-.7-.1-.1-.2-.2-.4-.2h-.3c-.2 0-.3-.1-.4-.3-.1-.1-.3-.2-.3-.3-.1-.1-.2-.2-.4-.3 0-.3-.2-.5-.4-.6-.2-.1-.4-.3-.5-.5-.2-.1-.4-.2-.5-.4-.1-.2-.2-.3-.4-.4v-1.2c0-.2-.1-.3-.2-.3 0-.5-.1-1-.2-1.5s-.2-.9-.2-1.4v-.3c0-.2-.1-.4-.1-.6s-.2-.4-.3-.6c-.3 0-.6.1-.8.1-.2 0-.5 0-.8.1-.4-.1-.8-.2-1.1-.2h-1.5v.2h-1c-.2 0-.4 0-.5.1-.1-.1-.2-.2-.3-.2h-.4c-.2 0-.4 0-.6-.1-.2-.1-.3-.1-.5-.1-.2.3-.3.6-.4.9l-.3.9v.2c0 .3-.1.5-.2.6 0 .1-.1.2-.1.4v.9c0 .1-.1.2-.2.3-.1.2-.2.4-.2.5v.7c0 .1 0 .2-.1.3 0 .1-.1.2-.1.4s0 .4.1.5c.1.2.1.4.1.5-.2.1-.3.3-.3.5s-.1.4-.2.6c-.2 0-.3.1-.4.2s-.2.2-.4.2h-.4c-.2 0-.3 0-.3.2-.2 0-.3 0-.5.1-.2 0-.3.1-.5.1 0 .1-.1.2-.3.2-.1-.1-.3-.2-.6-.2h-.6c0-.3-.2-.5-.5-.5s-.6-.2-.7-.4c-.1-.2-.3-.4-.6-.4-.2 0-.5 0-.7-.1 0-.3-.2-.5-.3-.6-.2-.1-.4-.3-.5-.5 0-.4 0-.7.1-.9.1-.3.1-.5.1-.8v-.2c0-.1-.1-.2-.1-.4s0-.4.1-.6c0-.2.1-.4.1-.6V140c0-.2 0-.3.1-.5s.1-.3.1-.5c0-.1 0-.2-.1-.3.1-.5.2-1 .2-1.5.1-.5.1-1 .1-1.5v-.7c-.1 0-.2-.1-.2-.2-.1-.1-.1-.2-.2-.2s-.3-.1-.5-.3c-.2 0-.5-.1-.6-.3-.2-.2-.4-.3-.6-.4 0-.2-.1-.3-.2-.5-.1-.1-.2-.2-.4-.3 0-.1 0-.2-.1-.3-.1-.1-.2-.1-.2-.2-.1 0-.1-.1-.1-.2s0-.3-.1-.4c0-.1 0-.3-.1-.4 0-.1-.1-.2-.2-.3-.1 0-.2-.1-.2-.2s0-.1.1-.2c0-.1.1-.1.1-.2-.1 0-.1-.1-.2-.1s-.1 0-.2-.1c0-.1 0-.1.1-.2.1 0 .1-.1.1-.2 0 0 0-.1-.1-.2 0 0-.1-.1-.1-.2s0-.2.1-.2c0-.1.1-.2.1-.2 0-.2 0-.3.1-.5.1-.1.1-.2.1-.3 0-.1-.1-.2-.2-.3 0 0 .1-.1.1-.2s0-.3-.1-.3c-.1-.1-.1-.2-.1-.3.1 0 .2-.1.3-.2.1-.1.1-.2.1-.3 0-.1.1-.2.1-.3 0-.1.1-.2.2-.2.2.1.4.2.5.3.2.1.4.2.5.3h.2c.2 0 .4 0 .6.1.2.1.4.1.6.2h.4c.4.2.7.4.9.4.2 0 .3 0 .4-.1.1.2.2.3.4.3.1 0 .1-.1.1-.2s0-.2-.1-.2c-.1-.1-.2-.1-.2-.2l.3.1c.1 0 .2-.1.2-.2s.1-.2.1-.3c0 0 .1-.1.1-.2v-.4c0-.1 0-.2.1-.2.1-.1.1-.2.1-.3 0-.2.1-.3.1-.4v-1.6c0-.1.1-.3.1-.4 0-.3.1-.6.1-1 0-.3.1-.6.2-1 0-.1-.1-.2-.2-.3v-.2c0-.1 0-.3.1-.4.1-.1.1-.3.1-.4v-.4c0-.2.1-.4.2-.6s.2-.4.2-.6v-1c.1 0 .2-.2.2-.4v-.6c0-.2 0-.5.1-.7.1-.2.1-.4.1-.7v-.3c0-.2.1-.3.2-.5s.1-.3.1-.5 0-.3-.1-.4c.2-.3.3-.6.4-.9.1-.3.2-.6.4-.9.1 0 .2-.1.2-.2s0-.1-.1-.2-.1-.1-.1-.2 0-.1.1-.1.1-.1.2-.2.3-.2.4-.2c0 0 .1-.1.1-.2.1-.2.1-.3.2-.3.1-.2.2-.3.3-.5.1-.1.3-.2.5-.2.1 0 .1-.1.2-.2s.1-.2.2-.3c.2 0 .3.1.5.1.1.1.3.1.5.1.5-.3 1.2-.5 1.9-.5h.6c.1 0 .1 0 .2-.1.1 0 .1-.1.2-.1s.1 0 .2.1.2.1.4.1c.1 0 .3 0 .4-.1.1 0 .2-.1.3-.1.2 0 .4.1.5.3.2 0 .4.1.6.2s.4.1.6.1h.4l.3.1c.2.1.3.2.4.3.4.1.8.1 1.2.2.4.1.8.2 1.2.4.4.3.7.5 1.1.6.2.3.4.4.7.5.1.2.2.3.3.5.1.1.3.2.5.3.1 0 .2.2.3.5s.3.5.5.5c0 .3.1.5.3.7.2.2.3.4.3.7.1.1.2.2.3.4.1.2.1.3.2.5 0 .2.1.4.2.5.1.2.2.4.2.5l.3.8c.2.1.3.3.2.5 0 .2.1.3.2.5.1.9.4 1.8.7 2.7-.1.1-.1.2-.1.3 0 .2 0 .3.1.5.1.1.2.3.2.5s0 .4.1.6c.1.2.2.4.3.5 0 0-.1.1-.1.3 0 .1 0 .2.1.3 0 .1.1.2.1.3v.3c0 .2 0 .4.1.6s.1.4.1.6v.3c0 .2 0 .5.1.7.1.2.1.4.1.6 0 .1 0 .2-.1.3.2.1.3.3.3.5 0 .1 0 .2-.1.3 0 .1-.1.2-.1.3 0 .1 0 .2.1.2.1.1.2.2.2.4v.4c0 .1.1.3.2.4v.4c0 .2 0 .5.1.7 0 .2.1.5.2.7 0 .4.1.8.1 1.2 0 .4.1.8.1 1.3.2.3.3.7.3 1 0 .4 0 .7.1 1.1 0 .1.1.2.1.4v.6c0 .1.1.2.1.3 0 .1 0 .2.1.4.1.1.1.3.1.4 0 .2-.1.3-.2.3 0 0-.1.1-.1.2s.1.2.2.2c.1.1.2.1.2.2s-.1.2-.2.3c0 .3 0 .5.1.7 0 .2.1.4.1.5v.4c.2.1.3.3.3.5v.6c0 .2.1.3.2.4v.8c0 .3.1.5.3.5 0 .2 0 .4.1.6.1.2.1.4.1.6 0 .1 0 .2-.1.3.1.1.2.2.4.1-1.4.1-1.2.1-1.1.2zM132 128.5c-.1-.1-.1-.2-.1-.4 0-.1 0-.3.1-.4 0-.1.1-.2.1-.4 0-.1 0-.2-.1-.4-.1-.3-.2-.6-.2-.9 0-.3 0-.6-.1-.9v-.4c0-.2 0-.4-.1-.5 0-.2-.1-.4-.1-.5-.2-.1-.3-.2-.3-.3s-.1-.3-.1-.5v-.5c0-.2 0-.4-.1-.5-.1 0-.2-.1-.2-.3v-.4c0-.1 0-.2-.1-.3-.1-.2-.1-.4-.1-.6 0-.2 0-.4-.2-.6v-.4c0-.2-.1-.4-.2-.4v-.6c0-.2-.1-.4-.2-.6-.1-.1-.1-.3-.1-.4 0-.1 0-.3-.1-.4-.1-.2-.2-.4-.2-.6 0-.2 0-.4-.1-.6 0-.3-.1-.5-.2-.5v-.2c0-.1 0-.2-.1-.3 0-.1-.1-.2-.1-.3 0-.5-.2-.8-.5-.8-.1 0-.2 0-.2.1-.2.4-.4.8-.5 1.2-.1 0-.2.1-.2.2v.4c0 .1 0 .1-.1.2-.2.4-.3.7-.2 1.1 0 .4 0 .7-.2 1.1v.4c0 .2 0 .5-.1.7-.1.2-.1.5-.2.7 0 .1-.1.2-.1.3 0 .2 0 .4.1.5 0 .2.1.4.1.5l-.2.2c-.1.1-.1.1-.1.2v.4c0 .5 0 1.1-.1 1.6-.1.6-.1 1.1-.1 1.6-.1.3-.2.6-.2 1-.1.3-.1.7-.1 1v.4c-.1.3-.1.5-.1.7 0 .1 0 .2.1.4.1.1.3.2.5.2s.3.1.5.1h1c.1 0 .3-.1.6-.1s.6 0 .9.1c.3 0 .6.1.9.1.4 0 .7-.1 1-.2v-.3c.4.2.4.1.4.1zM176.4 122.1c0 .1.1.3.1.4v.5c0 .4-.1.8-.3 1.1-.1.2-.2.4-.2.6 0 .2-.1.4-.2.6-.1.2-.2.4-.2.7-.3.2-.6.4-.8.6-.3.2-.4.6-.5.9-.4.1-.7.2-.9.4s-.6.4-.9.4l-.2.2c0 .1 0 .2-.1.3-.7.4-1.3.8-1.8 1.2-.4.1-.7.2-1 .3-.3.1-.7.2-1 .2l-.9.3c-.3.1-.5.2-.7.3 0 .4.2.7.5 1s.7.5.9.7l.8.8c.3.2.5.5.8.8.1.1.2.1.3.2.1.1.2.2.2.3 0 .1 0 .1-.1.2.2.1.3.2.3.4s.1.3.3.4c.1.1.1.1.1.2v.2c.1.1.2.2.3.4s.2.4.2.6.2.5.3.7c.1.2.2.3.3.4.1.3.3.6.5.9.2.3.4.6.4.9.1.4.2.7.4 1s.3.7.4 1c0 .2.1.3.1.5v.4c0 .4 0 .7-.1 1-.1.3-.1.7-.2 1 0 .1 0 .1.1.2s.1.1.1.2c-.1.1-.2.2-.3.2-.1.1-.2.1-.3.2l-.2.2-.2.2c-.2 0-.3.2-.4.3-.1.2-.2.3-.5.3h-.2c-.5.2-1.1.3-1.7.3-.5 0-.9-.1-1.3-.2h-.7c-.2 0-.5-.1-.6-.2-.4-.1-.6-.3-.7-.7-.1-.4-.4-.5-.7-.5 0-.1 0-.2.1-.2 0-.1 0-.2-.1-.2s-.2 0-.2-.1c-.3-.3-.6-.6-.8-1-.2-.3-.6-.6-.9-.8-.1-.1-.2-.3-.2-.4 0-.2 0-.3.1-.5.1-.1.1-.3.2-.4 0-.1.1-.3.1-.6s0-.6-.1-.9-.3-.5-.6-.7c0-.2 0-.5-.1-.8-.1-.3-.1-.6-.2-.9-.1-.3-.2-.6-.2-.9-.1-.3-.2-.6-.2-.8l-.3-.6c-.1-.2-.2-.4-.4-.6-.2-.9-.7-1.5-1.5-2-.5-.1-1-.1-1.5-.2l-1.5-.3h-.4c-.2 0-.3 0-.4.1v.5c0 .7 0 1.4-.1 2.1s-.1 1.4-.1 2.1c0 0-.1.1-.1.2s0 .1.1.2c0 .1.1.1.1.2 0 .4-.1.8-.1 1.2 0 .4-.1.8-.2 1.2.1.3.1.6.1.9v1.8c0 .3.1.6.1.9.1.1.1.1.2.1s.1 0 .1.1-.1.2-.3.3v.6c0 .4 0 .6.1.8-.1.2-.2.5-.4.6-.2.2-.3.4-.5.6-.2 0-.4.1-.5.1h-.5c-.3 0-.6-.1-.9-.2h-.5l-.7-.6c-.2-.1-.4-.1-.7-.1-.3 0-.4-.1-.4-.4 0-.2-.1-.3-.3-.4-.2 0-.3-.1-.3-.3 0-.1 0-.1-.1-.1s-.1-.1-.2-.1l-.3-.3c0-.1-.1-.2-.3-.2-.1 0-.2 0-.3.1 0 0-.1.1-.2.1-.2 0-.3-.1-.3-.3-.1-.2-.2-.3-.3-.3-.1 0-.2 0-.3.1l-.3-.6c-.1-.2-.3-.4-.5-.5 0-.2.1-.4.2-.5.1-.1.2-.3.2-.5-.1-.3-.1-.6-.1-.8v-2.3c0-.3 0-.7-.1-1 0-.3-.1-.7-.1-1 0-.4.1-.8.2-1.2.1-.7.1-1.4.1-2.2s.1-1.5.2-2.2c0-.1.1-.2.1-.3v-1.1c0-.2.1-.4.2-.6V128c.1 0 .2-.1.2-.3 0-.1 0-.2-.1-.4-.1-.1-.2-.2-.2-.3.2-.1.4-.1.4-.2 0-.2 0-.4.1-.6 0-.2.1-.4.1-.6 0-.2 0-.4-.1-.4 0-.1 0-.3.1-.4 0-.1.1-.2.1-.3 0-.1 0-.2-.1-.3 0-.1-.1-.2-.1-.4 0-.1 0-.2.1-.3.1-.4.2-.9.2-1.3s.1-.9.2-1.3c0-.8.1-1.6.2-2.5.1-.8.2-1.6.3-2.5 0-.2-.1-.3-.2-.3-.1-.1-.3-.1-.4-.1-.2 0-.3 0-.5-.1-.1 0-.2-.1-.3-.3-.1-.3-.3-.5-.6-.5s-.5-.3-.6-.6c-.1-.2-.3-.2-.6-.2-.2 0-.4-.1-.5-.3-.1-.2-.3-.3-.5-.4-.2 0-.4-.1-.6-.3.2 0 .4 0 .5-.1 0-.1 0-.2-.1-.3 0-.1-.1-.3-.1-.4 0 0 .1-.1.2-.1h.4c.1 0 .1-.1.2-.2.1-.3.3-.5.6-.5.2-.1.5-.2.6-.5 0-.1 0-.1.1-.1h.2c.1 0 .3-.1.6-.3.3-.2.5-.4.7-.4-.1-.2-.1-.4-.1-.4.1 0 .4.1.6.1.3 0 .5-.1.6-.2.4-.3.8-.5 1.3-.6.4-.1.9-.3 1.3-.5.7-.2 1.4-.3 2.2-.3.4 0 .8 0 1.1.1.4 0 .7.1 1.1.2.2 0 .4-.1.8-.1.5 0 1 0 1.5.1s1 .2 1.5.2c.2.1.4.1.6.1.2 0 .4 0 .6.2.4.2.8.3 1.2.3.4.1.8.2 1.1.5.2.2.4.3.6.2.2 0 .4 0 .6.2H166.5c.1 0 .2 0 .2.1h-.3c-.1 0-.2.1-.2.2s.1.2.2.2.2 0 .4.1.3 0 .4.1c.1 0 .2.1.3.1.2.1.4.2.5.3.2 0 .3.1.5.3.2.1.4.1.6.2.2 0 .4.1.5.3.9.5 1.7 1.1 2.5 1.8.7.7 1.3 1.5 1.9 2.4.1.2.3.4.5.5 0 0-.1.1-.1.3.2.1.3.3.4.6.1.2.1.4.2.6l.3.9c.2.3.2.6.2.9.2.4.3.8.3 1.1s.6.8.6 1.1zm-9-4.8c-.1-.2-.2-.4-.2-.6 0-.2-.1-.5-.2-.6-.1-.2-.2-.6-.2-.9v-.2c-.2 0-.3-.1-.3-.2s-.1-.2-.2-.3c-.2-.3-.5-.4-.9-.5-.3 0-.7-.1-1-.3-.3-.1-.6-.2-.8-.2-.3 0-.5-.1-.8-.1-.5 0-1 0-1.4.1-.5.1-.9.1-1.4.2l-.3.2c-.3 0-.5.1-.7.2-.2.1-.4.2-.6.4V117.4c0 .2 0 .5-.1.7v.4c0 .2-.1.4-.2.6l-.2 2-.1.1s-.1 0-.1.1c0 .5-.1 1-.2 1.4-.1.4-.1.9-.1 1.4 0 .3 0 .5.1.6.1.2.2.4.3.4.3 0 .6-.1.9-.2.3-.1.6-.2.9-.2.3-.2.6-.3.9-.3s.6-.1.9-.2c.2-.1.4-.2.6-.2.2 0 .4-.1.6-.2.2-.1.4-.2.7-.3.2-.1.4-.2.6-.5.5-.3 1-.6 1.3-1.1l1.2-1.2c.1-.2.3-.5.5-.6.2-.2.3-.4.3-.7v-.2c.1-.2.2-.4.2-.7 0-.2-.1-.6-.2-.9 0-.1 0-.1.1-.2.1 0 .1 0 .1-.1zM205.5 114.5v1.2c0 .5-.1 1-.2 1.4-.7.2-1.5.3-2.3.3-.3 0-.6 0-.9-.1-.3 0-.6-.1-.9-.2-.4-.1-.8-.2-1.2-.1-.4 0-.8 0-1.2-.2-.2 0-.5-.1-.7-.2-.2-.1-.4-.2-.7-.2-.2 0-.4.1-.6.1h-.8c-.2 0-.4 0-.6.1-.1.1-.2.2-.2.3 0 .1 0 .2.1.3.1.1.1.2.1.3 0 .1.1.3.1.5 0 .3 0 .6-.1.8s-.1.5-.1.8v.3c0 .2 0 .3-.1.4-.1.1-.1.2-.1.3 0 0 0 .1.1.3 0 .5.1 1 .1 1.4v1.4c0 .8-.1 1.6-.2 2.4 0 .3 0 .6-.1.9s-.1.6-.1.9c0 .2 0 .4.1.5 0 0 0 .1-.1.1h-.1v1.1c0 .4-.1.7-.1 1-.1.2-.1.4-.1.6V133c0 .2-.1.4-.1.6-.2.7-.4 1.4-.4 2.2 0 .7-.1 1.5-.3 2.2-.1.1-.2.2-.2.5v.6c0 .1 0 .2-.1.4s-.2.4-.2.6v1.2c0 .2-.1.4-.1.6-.1.7-.2 1.5-.4 2.2-.1.7-.2 1.5-.3 2.3.1 0 .2.1.2.3 0 .1-.1.2-.2.2-.2 0-.3-.1-.4-.2-.4.4-1 .6-1.7.6-.2 0-.5 0-.7-.1-.2 0-.5-.1-.7-.2-.6-.4-1.3-.5-2-.5h-.4c-.1 0-.2 0-.4.1-.1-.3-.2-.6-.3-.8-.3-.1-.5-.2-.7-.3-.2-.1-.4-.3-.7-.4-.1-.1-.2-.2-.4-.2s-.3-.1-.4-.2c-.1-.2-.2-.3-.4-.4-.2-.1-.3-.2-.4-.4 0-.1-.1-.2-.1-.4s0-.5.1-.7.1-.4.2-.7l.7-4.8c0-.6.1-1.2.3-1.7.1-.6.2-1.1.2-1.7.1-.5.2-1.1.3-1.6.1-.6.1-1.1.2-1.6.1-.3.1-.6.2-.8 0-.2.1-.5.1-.8s0-.5-.1-.6c-.1 0-.2-.1-.2-.2h.2c.1 0 .2-.1.2-.3 0-.1-.1-.3-.1-.5 0-.3.1-.6.2-.9.1-.3.2-.6.2-.9 0-1 .1-2 .3-2.9.2-1 .3-1.9.3-2.9 0-.6.1-1.1.2-1.7.1-.5.2-1.1.2-1.6-.3-.2-.6-.3-.9-.3-.3 0-.7 0-1-.1h-.2c-.2 0-.3 0-.5-.1-.1-.1-.3-.1-.5-.1s-.3 0-.4.1h-.5c-.5 0-1 0-1.4.1-.4.1-.9.1-1.4.1-.1 0-.2.1-.3.1-.3 0-.5-.1-.8-.2-.2-.1-.5-.2-.8-.3-.2 0-.4-.2-.6-.3-.1-.2-.3-.4-.5-.6-.3-.1-.5-.2-.5-.3v-.2c0-.3-.1-.5-.4-.7-.2-.2-.4-.5-.5-.7l-.6-.6c-.2-.2-.3-.5-.4-.8-.1-.2-.2-.3-.3-.5-.2-.1-.2-.3-.2-.5.2-.1.4-.2.5-.2.2-.1.4-.1.5-.2 0-.2 0-.3-.1-.3s-.2-.1-.2-.2c.1 0 .2-.1.3-.1h.8c.1-.1.2-.2.2-.3.1-.1.2-.2.3-.2 0 0 .1 0 .3.1.1 0 .1.1.2.1.2 0 .3-.1.5-.2.1-.1.3-.2.5-.2h.2c.7-.2 1.4-.3 2-.2.7 0 1.4 0 2.1-.1h.9c.8 0 1.6 0 2.5-.1.8-.1 1.6-.2 2.5-.2.2 0 .4 0 .6.1.2 0 .4.1.6.2.1 0 .2-.1.4-.1s.4 0 .6.1c.2 0 .4.1.6.1.4 0 .8-.1 1.1-.1.3 0 .7-.1 1-.1.7 0 1.2.1 1.7.3.5.1.9.2 1.4.2.5 0 .9 0 1.4.1.1 0 .2.1.3.1h.3c.4 0 .8 0 1.1-.1.3-.1.7-.1 1.1-.1.1.2.2.5.3.7.1.2.4.4.6.4.1 0 .2 0 .3-.1 0 .4.2.5.5.5l.6.9c.2.3.4.6.7.9.5.3.9.7 1.2 1.3.5 0 .9.4 1.3.8z"
          />
        </svg>
      </button>
    </div>
    <div v-else>
      <p class="highscore__ended color-brown text-center">
        La course est terminée!
      </p>
    </div>
    <div class="highscore__scores grow w-full p-10">
      <div ref="message" v-if="dossard != 0" class="mb-10">
        <p
          class="highscore__scores__paragraph color-light text-center"
          v-if="highscores.some((highscore) => highscore.dossard == dossard)"
        >
          Bravo dossard {{ dossard }}, vous faîtes parti du highscore!
        </p>
        <p
          class="highscore__scores__paragraph color-light text-center"
          v-if="!highscores.some((highscore) => highscore.dossard == dossard)"
        >
          Merci dossard {{ dossard }} pour votre participation ...
        </p>
      </div>
      <ul>
        <li
          v-for="(highscore, index) in highscores"
          :key="index"
          class="highscore__scores__single border-b-orange w-full"
        >
          <div
            :class="highscore.dossard == dossard && allowBlink ? 'blink' : ''"
            class="flex justify-between color-brown py-8 color-brown w-full"
          >
            <div class="highscore__scores__single__dossard">
              <span class="color-light">{{ index + 1 }}. </span>
              <span class="balmy">dossard {{ highscore.dossard }}</span>
            </div>
            <div class="highscore__scores__single__km">
              {{ highscore.km }}km
            </div>
          </div>
        </li>
      </ul>
    </div>
    <footer>
      <figure class="highscore__logo">
        <img ref="restart" src="@/assets/img/logo.svg" alt="BeBuddy logo" />
      </figure>
    </footer>
  </div>
</template>
